# ğŸ“± GUIDE D'UTILISATION â€” GIRASOLE DIAGPV

> **Application d'audits photovoltaÃ¯ques terrain â€” 100% serverless Cloudflare**

---

## ğŸ”— **ACCÃˆS APPLICATION**

### **URL Production** : https://girasole-diagpv.pages.dev

- **Dashboard** : https://girasole-diagpv.pages.dev/
- **Planning missions** : https://girasole-diagpv.pages.dev/planning

---

## ğŸ“‹ **ACCÃˆS RAPIDE PAR CENTRALE**

### **TOUTES LES CENTRALES (52 installations PV)**

| NÂ° | Centrale | Mission | Audit SOL | Audit TOITURE | Lien direct |
|----|----------|---------|-----------|---------------|-------------|
| 1 | Antunez - SCI ANAUJA | Mission 1 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/1) |
| 2 | EARL CADOT | Mission 2 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/2) |
| 3 | Azemar | Mission 3 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/3) |
| 4 | Mathieu Montet | Mission 4 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/4) |
| 5 | Hangar Laurent ROUX | Mission 5 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/5) |
| 6 | Hangar Bernard MAGE | Mission 6 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/6) |
| 7 | Hangar Pierre MOURGUES | Mission 7 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/7) |
| 8 | Hangar Karl Biteau | Mission 8 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/8) |
| 9 | Burgat Et Fils Tp | Mission 9 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/9) |
| 10 | HANGAR Angelina SIMMONET | Mission 10 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/10) |
| 11 | Maymat | Mission 11 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/11) |
| 12 | HANGAR Christian MIGNARD | Mission 12 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/12) |
| 13 | DUMONT GUY | Mission 13 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/13) |
| 14 | MARTEL 184 Construction | Mission 14 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/14) |
| 15 | BOUCHARDY 203 LOC | Mission 15 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/15) |
| 16 | BOULOIR 206 LOC | Mission 16 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/16) |
| 17 | Hangar Renaud Sonnard | Mission 17 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/17) |
| 18 | Hangar Fabrice COMBY | Mission 18 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/18) |
| 19 | Hangar Julien Vaudin | Mission 19 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/19) |
| 20 | Hangar Richard VAN ZANTEN | Mission 20 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/20) |
| 21 | HANGAR Benoit BERTELOOT | Mission 21 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/21) |
| 22 | Hangar Laurent ROUX (2) | Mission 22 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/22) |
| 23 | Serge Maltaverne | Mission 23 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/23) |
| 24 | Hangar Christophe CARRERE nÂ°2 | Mission 24 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/24) |
| 25 | Hangar FrÃ©dÃ©ric CASTET | Mission 25 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/25) |
| 17 | Hangar Renaud Sonnard | Mission 17 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/17) |
| 18 | Hangar Fabrice COMBY | Mission 18 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/18) |
| 21 | HANGAR Benoit BERTELOOT | Mission 21 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/21) |
| 25 | Hangar FrÃ©dÃ©ric CASTET | Mission 25 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/25) |
| 26 | MARTEL 183 LOC | Mission 26 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/26) |
| 27 | Hangar Frederic Sinaud | Mission 27 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/27) |
| 28 | Hangar Frederic Sinaud (2) | Mission 28 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/28) |
| 29 | HARAS DE LA MAJORIE/MANOHA | Mission 29 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/29) |
| 30 | Hangar Yannick CLEMENT | Mission 30 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/30) |
| 31 | Concept-TY Chambray 2 | Mission 31 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/31) |
| 32 | Hangar Patrick BLANCHET | Mission 32 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/32) |
| 33 | MATHIEU Vincent | Mission 33 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/33) |
| 34 | Cheraud | Mission 34 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/34) |
| 35 | Hangar FrÃ©dÃ©ric CASTET (2) | Mission 35 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/35) |
| 36 | Didier - PRIEUR | Mission 36 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/36) |
| 37 | Hangar Eric LOGNON | Mission 37 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/37) |
| 38 | Hangar LAMIOT | Mission 38 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/38) |
| 39 | VIEL | Mission 39 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/39) |
| 40 | Serge Maltaverne (2) | Mission 40 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/40) |
| 41 | SCI KILJOR | Mission 41 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/41) |
| 42 | Hangar Benjamin CHASSON | Mission 42 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/42) |
| 43 | Bourgeois | Mission 43 | âœ… | âœ… | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/43) |
| 44 | EARL GOUNY | Mission 44 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/44) |
| 45 | Hangar Maxime Bayle | Mission 45 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/45) |
| 46 | Commune De Pomas | Mission 46 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/46) |
| 47 | CHATEAU PASCAUD | Mission 47 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/47) |
| 48 | GAEC SAINT JEAN | Mission 48 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/48) |
| 49 | EARL SOUMAGNE | Mission 49 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/49) |
| 50 | SCEA CANTAGRIL | Mission 50 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/50) |
| 51 | Perez Christian | Mission 51 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/51) |
| 52 | Payet Pierre AndrÃ© | Mission 52 | âœ… | âŒ | [Ouvrir audit](https://girasole-diagpv.pages.dev/audit/52) |

**LÃ©gende** :
- âœ… **Audit SOL** : Checklist 40 points (systÃ©matique pour toutes les missions)
- âœ… **Audit TOITURE** : Checklist 13 points (si `audit_toiture = 'X'`)

---

## ğŸš€ **WORKFLOW TERRAIN**

### **1ï¸âƒ£ Avant la mission**
1. Ouvrir le **Dashboard** : https://girasole-diagpv.pages.dev/
2. Chercher la centrale (ex: "Burgat")
3. Cliquer sur **"ğŸ”§ Checklist"** pour ouvrir l'audit

### **2ï¸âƒ£ Pendant la mission (sur terrain)**
1. **Checklist SOL** : 40 points de contrÃ´le
   - Cliquer sur chaque bouton : âœ… CONFORME / âŒ NON CONFORME / â– N/A
   - Ajouter des photos par item (multi-upload)
   - Ajouter des commentaires si nÃ©cessaire
   
2. **Checklist TOITURE** (si applicable) : 13 points de contrÃ´le
   - **Nouveaux items** (27/11/2024) :
     - Point 12 : PrÃ©sence de film anticondensation ?
     - Point 13 : PrÃ©sence de limaille/rouille/piquage sous modules ?
   - Photos + commentaires par item
   
3. **Photos gÃ©nÃ©rales** : Galerie globale de la centrale
   - Ajouter lÃ©gendes descriptives

4. **Commentaire final** : SynthÃ¨se de l'audit
   - Auto-sauvegarde toutes les 2 secondes

### **3ï¸âƒ£ AprÃ¨s la mission**
1. Cliquer sur **"ğŸ“„ GÃ‰NÃ‰RER RAPPORT HTML/PDF"**
2. Le rapport s'ouvre dans un nouvel onglet
3. **Imprimer/Sauvegarder en PDF** via le bouton navigateur
4. Le rapport contient :
   - Toutes les checklists (SOL + TOITURE si applicable)
   - Photos par item avec miniatures
   - Commentaires par item
   - Photos gÃ©nÃ©rales
   - Commentaire final
   - Statistiques de conformitÃ©

---

## ğŸ—„ï¸ **OÃ™ SONT STOCKÃ‰ES LES DONNÃ‰ES ?**

### **Architecture 100% Cloudflare D1 (SQLite serverless)**

| Type de donnÃ©es | Table DB | Localisation | CapacitÃ© |
|----------------|----------|--------------|----------|
| **Centrales** | `centrales` | Cloudflare D1 | 52 installations |
| **Missions** | `ordres_mission` | Cloudflare D1 | 52 missions |
| **Checklist SOL** | `checklist_items` | Cloudflare D1 | 2080 items (52Ã—40) |
| **Checklist TOITURE** | `checklist_items_toiture` | Cloudflare D1 | 13 items/mission si requis |
| **Photos item** | `ordres_mission_item_photos` | Cloudflare D1 | Base64 complet |
| **Photos gÃ©nÃ©rales** | `ordres_mission_photos_generales` | Cloudflare D1 | Base64 complet |
| **Commentaires item** | `checklist_items.commentaire` | Cloudflare D1 | Texte illimitÃ© |
| **Commentaire final** | `ordres_mission_commentaires_finaux` | Cloudflare D1 | Texte illimitÃ© |
| **Rapports HTML/PDF** | `rapports_audits` | Cloudflare D1 | JSON structure |

### **ğŸ”’ SÃ©curitÃ© & Sauvegarde**

âœ… **0% localStorage** : Aucune donnÃ©e dans le navigateur  
âœ… **100% Cloudflare D1** : Base de donnÃ©es distribuÃ©e globalement  
âœ… **Auto-sauvegarde** : Chaque clic = sauvegarde immÃ©diate en DB  
âœ… **Photos base64** : StockÃ©es directement en DB (pas de fichiers)  
âœ… **Commentaires auto-save** : DÃ©bounce 2 secondes  
âœ… **Hors-ligne** : Impossible (nÃ©cessite connexion internet)  

### **ğŸŒ Infrastructure technique**

- **Cloudflare Workers** : Edge computing (latence < 50ms)
- **Cloudflare D1** : SQLite distribuÃ© (multi-rÃ©gions)
- **Cloudflare Pages** : HÃ©bergement frontend
- **API REST** : Hono framework (TypeScript)
- **Aucun serveur** : 100% serverless

---

## ğŸ“Š **API DISPONIBLES**

| Endpoint | MÃ©thode | Description |
|----------|---------|-------------|
| `/api/checklist/:mission_id` | GET | RÃ©cupÃ©rer checklist SOL (40 items) |
| `/api/checklist-toiture/:mission_id` | GET | RÃ©cupÃ©rer checklist TOITURE (13 items) |
| `/api/checklist/item/:item_id` | PUT | Sauvegarder statut item |
| `/api/checklist/item/:item_id/comment` | PUT | Sauvegarder commentaire item |
| `/api/checklist/:mission_id/item/:item_id/photos` | POST | Uploader photos item |
| `/api/ordres-mission/:mission_id/photos-generales` | POST | Uploader photos gÃ©nÃ©rales |
| `/api/ordres-mission/:mission_id/commentaire-final` | PUT | Sauvegarder commentaire final |
| `/api/rapports/generer/:mission_id` | POST | GÃ©nÃ©rer rapport HTML/PDF |
| `/rapport/:rapport_id` | GET | Afficher rapport HTML |

---

## âœ… **CHECKLISTS DISPONIBLES**

### **ğŸ“‹ Checklist SOL (40 points)**
SystÃ©matique pour toutes les missions. Points de contrÃ´le :
1. PrÃ©sence autocontrÃ´le renseignÃ© installateur
2. Fixations chemin cÃ¢bles (qualitÃ© + mÃ©thode)
3. Type cheminement cÃ¢bles (galvanisÃ© chaud/froid)
4. Protections mÃ©caniques cÃ¢bles (contacts saillants)
5. RepÃ©rage Ã©quipements (inscrit sur Ã©quipement)
6. Type repÃ©rage cÃ¢bles (sÃ©rigraphiÃ©/manuscrit)
7. Connecteurs MC4 serrÃ©s/Ã©tanches
8. Ã‰tat visuel modules (fissures/casse)
9. Ã‰tat visuel jonctions coffrets
10. Disjoncteurs calibrage correct
... *(40 points au total)*

### **ğŸ  Checklist TOITURE (14 points)**
Uniquement si `audit_toiture = 'X'` (Missions 2, 6, 8, 12, 17, 18, 21, 25, 36, 38, 39, 43, 47). Points de contrÃ´le :
1. DÃ©montage/remontage ~25 panneaux pertinents
2. ConformitÃ© DTU 40.35
3. QualitÃ© montage/serrage SI sur support
4. QualitÃ© montage/serrage panneaux sur SI
5. Fixation cheminement cÃ¢bles (supports, Ã©tanchÃ©itÃ©)
6. CompatibilitÃ©/serrage/Ã©tanchÃ©itÃ© connecteurs MC4
7. QualitÃ© cheminement cÃ¢bles DC
8. Cheminement cÃ¢bles (pas directement sur couverture)
9. Raccordements terres
10. Ã‰tiquettes rÃ©glementaires tension DC
11. Respect notices montage / Interdiction marcher sur panneaux
12. **ğŸ†• PrÃ©sence de film anticondensation ?**
13. **ğŸ†• PrÃ©sence de limaille/rouille/piquage sous modules ?**
14. **ğŸ†• Mesurer distance Modules > Rives / Modules > Faitage**

---

## ğŸ¯ **RÃ‰SUMÃ‰ LIENS UTILES**

| Fonction | Lien |
|----------|------|
| **Dashboard** | https://girasole-diagpv.pages.dev/ |
| **Planning** | https://girasole-diagpv.pages.dev/planning |
| **Exemple audit Mission 9** | https://girasole-diagpv.pages.dev/audit/9 |
| **Exemple rapport Mission 9** | https://girasole-diagpv.pages.dev/rapport/17 |
| **Photos Mission 9** | https://girasole-diagpv.pages.dev/photos-audit/9 |

---

## ğŸ“± **COMPATIBILITÃ‰**

âœ… **Desktop** : Chrome, Firefox, Safari, Edge  
âœ… **Mobile** : iOS Safari, Android Chrome  
âœ… **Tablette** : iPad, Android tablets  
âš ï¸ **Internet requis** : Pas de mode hors-ligne

---

## ğŸ”§ **SUPPORT TECHNIQUE**

- **URL Production** : https://girasole-diagpv.pages.dev
- **Base de donnÃ©es** : Cloudflare D1 `girasole-db-production`
- **GitHub** : Code source versionnÃ©
- **Logs** : Cloudflare Workers dashboard

---

**ğŸ“… DerniÃ¨re mise Ã  jour** : 27/11/2024  
**âœ… Version** : 2.1 (Migration 0013 â€” Ajout mesure distances TOITURE)  
**ğŸ”’ Garantie** : 0% localStorage, 100% Cloudflare D1
ntie** : 0% localStorage, 100% Cloudflare D1
